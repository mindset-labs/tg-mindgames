import { AsyncReducer, Eq } from '@rimbu/common';
import { type AsyncStreamSource } from '@rimbu/stream/async';
/**
 * An AsyncReducer that produces instances of `AsyncStreamSource`.
 * @typeparam T - the input element type
 * @typeparam R - the result stream element type
 */
export type AsyncTransformer<T, R = T> = AsyncReducer<T, AsyncStreamSource<R>>;
export declare namespace AsyncTransformer {
    /**
     * An AsyncReducer that produces instances `AsyncStreamSource.NonEmpty`.
     * @typeparam T - the input element type
     * @typeparam R - the result stream element type
     */
    type NonEmpty<T, R = T> = AsyncReducer<T, AsyncStreamSource.NonEmpty<R>>;
    /**
     * Returns an async transformer that produces windows/collections of `windowSize` size, each
     * window starting `skipAmount` of elements after the previous, and optionally collected
     * by a custom reducer.
     * @typeparam T - the input element type
     * @typeparam R - the window type
     * @param windowSize - the amount of elements for each window
     * @param skipAmount - (default: `windowSize`) the amount of elements between the start of each window
     * @param collector - (default: Reducer.toArray()) the reducer to use to convert elements to windows
     * @example
     * ```ts
     * await AsyncStream.of(1, 2, 3, 4, 5, 6)
     *   .transform(AsyncTransformer.window(3))
     *   .toArray()
     * // => [[1, 2, 3], [4, 5, 6]]
     * ```
     */
    const window: {
        <T>(windowSize: number, skipAmount?: number): AsyncTransformer<T, T[]>;
        <T, R>(windowSize: number, skipAmount?: number, collector?: AsyncReducer<T, R>): AsyncTransformer<T, R>;
    };
    /**
     * Returns an async transformer that returns only those elements from the input that are different to previous element
     * according to the optionally given `eq` function.
     * @param eq - (default: `Eq.objectIs`) the equality testing function
     * @example
     * ```ts
     * await AsyncStream.of(1, 1, 2, 3, 2, 2)
     *   .transform(AsyncTransformer.distinctPrevious())
     *   .toArray()
     * // => [1, 2, 3, 2]
     * ```
     */
    function distinctPrevious<T>(eq?: Eq<T>): AsyncTransformer<T>;
}
